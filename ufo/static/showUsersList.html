<link rel="import" href="bower_components/iron-ajax/iron-ajax.html" />
<link rel="import" href="bower_components/paper-item/paper-item.html" />
<link rel="import" href="bower_components/paper-listbox/paper-listbox.html" />
<link rel="import" href="bower_components/paper-spinner/paper-spinner.html" />

<dom-module id="show-users-list">
  <style>
    .name-div {
      width: 300px;
    }
    .email-div {
      width: 250px;
    }
    .revoked-div {
      width: 200px;
    }
  </style>
  <template>
    <template is="dom-if" if="{{loading}}">
      <paper-spinner active$={{loading}}></paper-spinner>
    </template>
    <iron-ajax auto
      url="{{getUsersUrl}}"
      method="GET"
      handle-as="json"
      id="get-users-ajax"
      loading="{{loading}}"
      last-response="{{ajaxResponse}}">
    </iron-ajax>
    <paper-listbox id="user-list">
      <template is="dom-repeat" items="[[ajaxResponse.users]]">
        <paper-icon-item id="{{item.email}}" class="horizontal layout around-justified">
          <iron-icon src="user.svg" item-icon></iron-icon>
          <div class="name-div">{{item.name}}</div>
          <div class="email-div">{{item.email}}</div>
          <div class="revoked-div">{{item.is_key_revoked}}</div>
          <paper-icon-button icon="arrow-drop-down" title="user details" id="user-details-dropdown"></paper-icon-button>
        </paper-icon-item>
      </template>
    </paper-listbox>
  </template>

  <script>
    Polymer({
      is: 'show-users-list',
      properties: {
        getUsersUrl: {
          type: String,
        },
      },
    });
  </script>
</dom-module>
